<!-- Modal Overlay -->
<div class="modal-overlay" *ngIf="isOpen" (click)="closeModal()">
    <!-- Modal Container -->
    <div class="modal-container" (click)="$event.stopPropagation()">
        <!-- Modal Header -->
        <div class="modal-header">
            <h2 class="modal-title">Crear Reserva</h2>
            <button class="close-button" (click)="closeModal()" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <!-- Modal Body -->
        <form #reservaForm="ngForm" (ngSubmit)="saveReserva()">
            <div class="modal-body">
                <div class="form-grid">
                    <!-- Información de la Reserva -->
                    <div class="form-section">
                        <h3 class="section-title">Información de la Reserva</h3>

                        <div class="form-group">
                            <div class="form-group">
                                <label for="vuelo">Vuelo</label>
                                <input type="text" id="vuelo" name="vuelo" [(ngModel)]="reserva.vuelo" required readonly
                                    class="form-input">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="estado">Estado</label>
                            <input type="text" id="estado" name="estado" [(ngModel)]="reserva.estado" value="Pendiente"
                                readonly class="form-input">
                        </div>

                        <div class="form-group">
                            <label for="Numasiento">Número de Asiento</label>
                            <input type="text" id="Numasiento" name="Numasiento" [(ngModel)]="reserva.numasiento"
                                placeholder="Ej: 12A, 5B" required class="form-input">
                        </div>
                    </div>

                    <!-- Información del Pago (MODIFICADA) -->
                    <div class="form-section">
                        <h3 class="section-title">Información del Pago</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="pagoFecha">Fecha de Pago</label>
                                <!-- Se elimina 'readonly' para permitir la edición si es necesario -->
                                <input type="date" id="pagoFecha" name="pagoFecha" [(ngModel)]="pago.fecha"
                                    class="form-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="pagoMonto">Monto</label>
                                <!-- Se elimina 'readonly' para permitir la edición si es necesario -->
                                <input type="number" id="pagoMonto" name="pagoMonto" [(ngModel)]="pago.monto"
                                    class="form-input">
                            </div>
                            <div class="form-group">
                                <label for="pagoMoneda">Moneda</label>
                                <!-- Se elimina 'readonly' para permitir la edición si es necesario -->
                                <input type="text" id="pagoMoneda" name="pagoMoneda" [(ngModel)]="pago.moneda"
                                    class="form-input">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="pagoMetodo">Método de Pago</label>
                            <!-- Se cambia de input a select para el menú desplegable -->
                            <select id="pagoMetodo" name="pagoMetodo" [(ngModel)]="pago.metodo_pago"
                                class="form-input form-select">
                                <!-- Opciones basadas en el enum MetodoPago -->
                                <option value="TARJETA">TARJETA</option>
                                <option value="EFECTIVO">EFECTIVO</option>
                                <option value="TRANSFERENCIA">TRANSFERENCIA</option>
                                <option value="PAYPAL">PAYPAL</option>
                                <option value="CRYPTO">CRYPTO</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="pagoEstado">Estado del Pago</label>
                            <!-- Se mantiene el badge para mostrar el estado actual -->
                            <div class="status-badge" [ngClass]="'status-' + pago.estado.toLowerCase()">
                                {{ pago.estado }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="modal-footer">
                <button type="button" class="btn-secondary" (click)="closeModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                    Cancelar
                </button>
                <button type="submit" class="btn-primary" [disabled]="!reservaForm.form.valid">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Crear Reserva
                </button>
            </div>
        </form>
    </div>
</div>