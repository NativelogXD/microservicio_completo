<div class="recuperar-container">
    <!-- Mensaje flotante -->
    <div *ngIf="mostrarMensaje" [ngClass]="tipoMensaje" class="mensaje-flotante">
        {{ mensaje }}
    </div>

    <div class="recuperar-card">
        <!-- Header -->
        <div class="recuperar-header">
            <div class="logo-icon">
                <i class="fas fa-key"></i>
            </div>
            <h1 class="recuperar-title">Recuperar Contraseña</h1>
            <p class="recuperar-subtitle">
                {{ emailVerificado ? 'Ingresa tu nueva contraseña' : 'Ingresa tu correo electrónico para recuperar tu
                contraseña' }}
            </p>
        </div>

        <!-- Recovery Form -->
        <form class="recuperar-form">
            <!-- Email Field (always visible) -->
            <div class="form-group">
                <label for="email" class="form-label">
                    <i class="fas fa-envelope"></i>
                    Correo Electrónico
                </label>
                <input type="email" id="email" name="email" [(ngModel)]="email" placeholder="tu.correo@ejemplo.com"
                    required [disabled]="emailVerificado" class="form-input">
            </div>

            <!-- Verify Email Button (only shown if email not verified) -->
            <button *ngIf="!emailVerificado" type="button" class="submit-button" [disabled]="!email || verificandoEmail"
                (click)="verificarEmail()">
                <i class="fas fa-search"></i>
                {{ verificandoEmail ? 'Verificando...' : 'Verificar Email' }}
            </button>

            <!-- Password Fields (only shown after email verification) -->
            <div *ngIf="emailVerificado" class="password-section">
                <div class="form-group">
                    <label for="nuevaPassword" class="form-label">
                        <i class="fas fa-lock"></i>
                        Nueva Contraseña
                    </label>
                    <input type="password" id="nuevaPassword" name="nuevaPassword" [(ngModel)]="nuevaPassword"
                        placeholder="••••••••" required class="form-input">
                </div>

                <div class="form-group">
                    <label for="confirmarPassword" class="form-label">
                        <i class="fas fa-lock"></i>
                        Confirmar Nueva Contraseña
                    </label>
                    <input type="password" id="confirmarPassword" name="confirmarPassword"
                        [(ngModel)]="confirmarPassword" placeholder="••••••••" required class="form-input">
                </div>

                <!-- Submit Button for Password Reset -->
                <button type="button" class="submit-button" [disabled]="!nuevaPassword || !confirmarPassword"
                    (click)="cambiarContrasena()">
                    <i class="fas fa-check"></i>
                    Cambiar Contraseña
                </button>
            </div>
        </form>

        <!-- Footer Links -->
        <div class="recuperar-footer">
            <p class="footer-text">
                ¿Recordaste tu contraseña?
                <a href="/login" class="link">Inicia sesión aquí</a>
            </p>
            <p class="footer-text">
                ¿No tienes cuenta?
                <a href="/registro" class="link">Regístrate aquí</a>
            </p>
        </div>
    </div>
</div>